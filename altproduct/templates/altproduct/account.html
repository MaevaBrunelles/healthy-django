{% extends 'altproduct/base.html' %}

{% block content %}

{% include 'altproduct/little-header.html' %}

<section id="account">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">

                <h2 class="section-heading">Un mail, un mot de passe et c'est parti !</h2>
                <hr class="my-4">
                
                <form id="account-form" action="{% url 'altproduct:register' %}" method="POST" class="mt-50">
                    {% csrf_token %}

                    {{ form.non_field_errors }}
                    <div class="fieldWrapper"> 
                        
                        <label for="{{ form.username.id_for_label }}">Nom d'utilisateur</label>
                        {{ form.username }}
                        {% if form.username.errors %}
                            {% for error in form.username.errors %}
                                <p class="errorform">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    
                    </div>

                    <div class="fieldWrapper">
                        <label for="{{ form.email.id_for_label }}">Adresse email</label>
                        {{ form.email }}
                        {% if form.email.errors %}
                            {% for error in form.email.errors %}
                                <p class="errorform">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>

                    <div class="fieldWrapper">
                        <label for="{{ form.password.id_for_label }}">Mot de passe</label>
                        {{ form.password }}
                        {% if form.password.errors %}
                            {% for error in form.password.errors %}
                                <p class="errorform">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>

                    <input type="submit" value="CrÃ©er mon compte" class="btn btn-primary btn-xl js-scroll-trigger mt-50">
                </form>

                {% elif login_form %}
                <form id="login-form" action="{% url 'altproduct:login' %}" method="POST" class="mt-50">
                    {% csrf_token %}

                    {{ login_form.non_field_errors }}
                    <div class="fieldWrapper"> 
                        
                        <label for="{{ form.username.id_for_label }}">Nom d'utilisateur</label>
                        {{ login_form.username }}
                        {% if login_form.username.errors %}
                            {% for error in login_form.username.errors %}
                                <p class="errorform">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    
                    </div>

                    <div class="fieldWrapper">
                        <label for="{{ form.password.id_for_label }}">Mot de passe</label>
                        {{ login_form.password }}
                        {% if login_form.password.errors %}
                            {% for error in login_form.password.errors %}
                                <p class="errorform">{{ error }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>

                    <input type="submit" value="Connexion" class="btn btn-primary btn-xl js-scroll-trigger mt-50">
                </form>

                {% else %}

                    {{ user.email }}

                {% endif %}
            </div>
        </div>
    </div>
</section>

{% endblock %}
